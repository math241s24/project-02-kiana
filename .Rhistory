IUCNCtDt = col_skip(),
IUCN_Cat = col_skip(),
IUCNCtSrc = col_skip(),
Access_Src = col_skip(),
Access_Dt = col_skip(),
Loc_Ds = col_skip(),
Loc_Nm = col_skip(),
Src_Date = col_skip(),
Unit_Nm = col_skip(),
Pub_Access = col_skip(),
GAP_Sts = col_skip(),
GAPCdSrc = col_skip(),
GAPCdDt = col_skip()
))
PAD_CA <- read_csv("../Data/Original_Data/PAD_CA.csv",
col_types = cols(FeatClass = col_skip(),
Category = col_skip(),
Loc_Own = col_skip(),
Loc_Mang = col_skip(),
Own_Type = col_skip(),
Own_Name = col_skip(),
EHoldTyp = col_skip(),
EsmtHldr = col_skip(),
Comments = col_skip(),
Date_Est = col_skip(),
IUCNCtDt = col_skip(),
IUCN_Cat = col_skip(),
IUCNCtSrc = col_skip(),
Access_Src = col_skip(),
Access_Dt = col_skip(),
Loc_Ds = col_skip(),
Loc_Nm = col_skip(),
Src_Date = col_skip(),
Unit_Nm = col_skip(),
Pub_Access = col_skip(),
GAP_Sts = col_skip(),
GAPCdSrc = col_skip(),
GAPCdDt = col_skip()
))
library(readr)
PAD_CA <- read_csv("Data/Original_Data/PAD_CA.csv")
View(PAD_CA)
PAD_CA <- PAD_CA %>%
rename(mang_level = Mang_Type,
mang_name = Mang_Name,
designation = Des_Tp
)
PAD_CA <- PAD_CA %>%
mutate(mang_level = case_when(
mang_level == "Regional Agency Special District" ~ "Local Government",
mang_level == "Joint" ~ "Local Government",
mang_level == "Private" ~ "Non-Governmental Organization",
mang_level == "Unknown" ~ "Non-Governmental Organization",
TRUE ~ mang_level
))
total_acres <- sum(PAD_CA$GIS_Acres, na.rm = TRUE)
area_summary <- PAD_CA %>%
group_by(mang_level) %>%
summarise(total_area = sum(GIS_Acres),
percentage = (sum(GIS_Acres) / total_acres) * 100) %>%
arrange(desc(total_area))  # Optional: Arrange by total_area in descending order
print(area_summary)
ggplot(area_summary, aes(x = "", y = percentage, fill = mang_level)) +
geom_bar(stat = "identity", width = 1) +
coord_polar("y", start = 0) +
labs(title = "Percentage of Total Acres: Management Level",
fill = "mang_level") +
theme_void() +
theme(legend.position = "bottom") +
scale_fill_brewer(palette = "Set2")
ggplot(area_summary, aes(x = "", y = percentage, fill = mang_level, label = paste0(round(percentage), "%"))) +
geom_bar(stat = "identity", width = 1) +
geom_text(aes(label = label), position = position_stack(vjust = 0.5), color = "white", size = 3) +
coord_polar("y", start = 0) +
labs(title = "Percentage of Total Acres by Management Level",
fill = "Management Level") +
theme_void() +
theme(legend.position = "bottom") +
scale_fill_brewer(palette = "Set3")
ggplot(area_summary, aes(x = "", y = percentage, fill = mang_level, label = paste0(round(percentage), "%"))) +
geom_text(aes(label = label), position = position_stack(vjust = 0.5), color = "white", size = 3) +
geom_bar(stat = "identity", width = 1) +
coord_polar("y", start = 0) +
labs(title = "Percentage of Total Acres by Management Level",
fill = "Management Level") +
theme_void() +
theme(legend.position = "bottom") +
scale_fill_brewer(palette = "Set3")
ggplot(area_summary, aes(x = "", y = percentage, fill = mang_level, label = paste0(round(percentage), "%"))) +
geom_bar(stat = "identity", width = 1) +
geom_text(aes(label = label), position = position_stack(vjust = 0.5), color = "white", size = 3) +
coord_polar("y", start = 0) +
labs(title = "Percentage of Total Acres by Management Level",
fill = "Management Level") +
theme_void() +
theme(legend.position = "bottom") +
scale_fill_brewer(palette = "Set3")
ggplot(area_summary, aes(x = "", y = percentage, fill = mang_level, label = paste0(round(percentage), "%"))) +
geom_bar(stat = "identity", width = 1) +
geom_text(position = position_stack(vjust = 0.5), color = "white", size = 3) +
coord_polar("y", start = 0) +
labs(title = "Percentage of Total Acres by Management Level",
fill = "Management Level") +
theme_void() +
theme(legend.position = "bottom") +
scale_fill_brewer(palette = "Set3")
ggplot(area_summary, aes(x = "", y = percentage, fill = mang_level, label = paste0(round(percentage), "%"))) +
geom_bar(stat = "identity", width = 1) +
geom_text(position = position_stack(vjust = 0.5), color = "white", size = 3) +
coord_polar("y", start = 0) +
labs(title = "Percentage of Total Acres by Management Level",
fill = "Management Level") +
theme_void() +
theme(legend.position = "bottom") +
scale_fill_brewer(palette = "Set2")
ggplot(area_summary, aes(x = "", y = percentage, fill = mang_level, label = paste0(round(percentage), "%"))) +
geom_bar(stat = "identity", width = 1) +
geom_text(position = position_stack(vjust = 0.5), color = "white", size = 3) +
coord_polar("y", start = 0) +
labs(title = "Percentage of Total Acres by Management Level",
fill = "Management Level") +
theme_void() +
theme(legend.position = "bottom") +
scale_fill_brewer(palette = "Set3")
ggplot(area_summary, aes(x = "", y = percentage, fill = mang_level, label = paste0(round(percentage), "%"))) +
geom_bar(stat = "identity", width = 1) +
geom_text(position = position_stack(vjust = 0.5), color = "white", size = 3) +
coord_polar("y", start = 0) +
labs(title = "Percentage of Total Acres by Management Level",
fill = "Management Level") +
theme_void() +
theme(legend.position = "bottom") +
scale_fill_brewer(palette = "Set2")
ggplot(area_summary, aes(x = "", y = percentage, fill = mang_level, label = paste0(round(percentage), "%"))) +
geom_bar(stat = "identity", width = 1) +
geom_text(position = position_stack(vjust = 0.7), color = "white", size = 3) +
coord_polar("y", start = 0) +
labs(title = "Percentage of Total Acres by Management Level",
fill = "Management Level") +
theme_void() +
theme(legend.position = "bottom") +
scale_fill_brewer(palette = "Set2")
ggplot(area_summary, aes(x = "", y = percentage, fill = mang_level, label = paste0(round(percentage), "%"))) +
geom_bar(stat = "identity", width = 1) +
geom_text(position = position_stack(vjust = 0.5), aes(x = 1.2), color = "white", size = 3) +
coord_polar("y", start = 0) +
labs(title = "Percentage of Total Acres by Management Level",
fill = "Management Level") +
theme_void() +
theme(legend.position = "bottom") +
scale_fill_brewer(palette = "Set2")
ggplot(area_summary, aes(x = "", y = percentage, fill = mang_level, label = paste0(round(percentage), "%"))) +
geom_bar(stat = "identity", width = 1) +
geom_text(position = position_stack(vjust = 0.5), aes(x = 1.5), color = "white", size = 3) +
coord_polar("y", start = 0) +
labs(title = "Percentage of Total Acres by Management Level",
fill = "Management Level") +
theme_void() +
theme(legend.position = "bottom") +
scale_fill_brewer(palette = "Set2")
ggplot(area_summary, aes(x = "", y = percentage, fill = mang_level, label = paste0(round(percentage), "%"))) +
geom_bar(stat = "identity", width = 1) +
geom_text(position = position_stack(vjust = 0.5), aes(x = 1.7), color = "black", size = 3) +
coord_polar("y", start = 0) +
labs(title = "Percentage of Total Acres by Management Level",
fill = "Management Level") +
theme_void() +
theme(legend.position = "bottom") +
scale_fill_brewer(palette = "Set2")
ggplot(area_summary, aes(x = "", y = percentage, fill = mang_level, label = paste0(round(percentage), "%"))) +
geom_bar(stat = "identity", width = 1) +
geom_text(position = position_stack(vjust = 0.5), aes(x = 1.6), color = "black", size = 3) +
coord_polar("y", start = 0) +
labs(title = "Percentage of Total Acres by Management Level",
fill = "Management Level") +
theme_void() +
theme(legend.position = "bottom") +
scale_fill_brewer(palette = "Set2")
ggplot(area_summary, aes(x = "", y = percentage, fill = mang_level, label = paste0(round(percentage), "%"))) +
geom_bar(stat = "identity", width = 1) +
geom_text(position = position_stack(vjust = 0.5), aes(x = 1.55), color = "black", size = 3) +
coord_polar("y", start = 0) +
labs(title = "Percentage of Total Acres by Management Level",
fill = "Management Level") +
theme_void() +
theme(legend.position = "bottom") +
scale_fill_brewer(palette = "Set2")
ggplot(area_summary, aes(x = "", y = percentage, fill = mang_level, label = paste0(round(percentage), "%"))) +
geom_bar(stat = "identity", width = 1) +
geom_text(position = position_stack(vjust = 0.5), aes(x = 1.55), color = "black", size = 3) +
coord_polar("y", start = 0) +
labs(title = "Percentage of Total Acres by Management Level",
fill = "") +
theme_void() +
theme(legend.position = "bottom") +
scale_fill_brewer(palette = "Set2")
View(ca_sf)
fire_counts_mangnm_yr <- fire_manage %>%
group_by(mang_name, discover_yr) %>%
summarize(fire_count = n()) %>%
mutate(percentage = (fire_count / sum(fire_count)) * 100)
fire_counts_manglvl_yr <- fire_manage %>%
group_by(mang_level, discover_yr) %>%
summarize(fire_count = n()) %>%
mutate(percentage = (fire_count / sum(fire_count)) * 100)
fire_counts_manglvl <- fire_manage %>%
group_by(mang_level) %>%
summarize(fire_count = n()) %>%
mutate(percentage = (fire_count / sum(fire_count)) * 100)
#74.3% of fires occurred on Federal Land, 510 fires
#17.4% of fires occurred on State Land, 120 fires
#nothing else of real importance
#and this is from 1984 - 2020 ...
ggplot(fire_counts_manglvl_yr, aes(x = discover_yr, y = fire_count, color = mang_level)) +
geom_line() +
labs(title = "CA Wildfires Over Time Across Land Management Level",
x = "Year Discovered",
y = "Number of Fires",
color = "Land Management")
View(fire_counts_manglvl)
#animated plot of wildfires each year with fires_counties and adding county boundaries
combined_plot <- ggplot() +
geom_sf(data = ca_sf, aes(fill = NAME)) +
labs(fill = "County") +
theme_void()
combined_plot + transition_states(fires_sf$discover_yr, transition_length = 1, state_length = 1)
library(countdown)
library(gt)
library(readxl)
library(gganimate)
library(gifski)
library(knitr)
library(kableExtra)
library(transformr)
fires_sf$discover_yr <- factor(fires_sf$discover_yr)
#Animated plot of fires_sf without any boundaries
fires_sf_byyear <- ggplot() +
geom_sf(data = fires_sf, aes(fill = factor(discover_yr))) +
labs(fill = "Year") +
theme_void()
fires_sf_byyear + transition_states(discover_yr, transition_length = 1, state_length = 1)
library(readr)
library(tidyverse)
library(tidycensus)
library(flextable)
library(sf)
library(tigris)
library(tmap)
library(RColorBrewer)
fires <- read_csv("../Data/Original_Data/fires.csv",
col_types = cols(COMMENT = col_skip(),
last_edited_user = col_skip(),
last_edited_date = col_skip(),
created_user = col_skip(),
created_date_2 = col_skip(),
created_date = col_skip(),
created_by_name = col_skip(),
modified_date = col_skip(),
modify_by_name = col_skip(),
wildland_fire_perimeter_comments = col_skip()
))
#POI: point of orgin, UI: unit identifier, UC = unit code
fires <- fires %>%
rename(POI_Jurisdictional_UI = point_of_origin_jurisdictional_unit_identifier,
POI_Protecting_UI = point_of_origin_protecting_unit_identifier,
reporting_UI = reported_unit_identifier,
incident_num = fire_incident_number,
name = incident_name,
cause_gen = incident_general_cause_name,
admin_UC = administrative_unit_code,
uniquie_fireID = unique_fire_identifier,
discover_yr = fire_discovered_calendar_year,
discover_date = fire_discovered_date,
controlled_date = fire_control_date,
acres_total = total_reported_acres
)
#making it spatial
fires_sf <- fires %>%
filter(!is.na(WKT)) %>%
st_as_sf(wkt = "WKT")
#Josie Griffin merged them in GIS for me :)
fire_manage <- read_csv("../Data/Original_Data/fire_location_data.csv")
fire_manage_cleanup <- c("point_of_origin_jurisdictional_unit_identifier",
"point_of_origin_protecting_unit_identifier",
"reported_unit_identifier",
"fire_incident_number",
"fire_code",
"fire_discovered_date_estimated_flag",
"fire_control_date_estimated_flag",
"collection_method",
"complex_name",
"irwin_identifier",
"wildland_fire_perimeter_comments",
"administrative_unit_code",
"administrative_state_code",
"created_date",
"created_by_name",
"modified_date",
"modify_by_name",
"created_user",
"created_date_2",
"last_edited_user",
"last_edited_date",
"unique_fire_identifier",
"FIRE_DSCVR",
"FIRE_DSC_1",
"FIRE_DSC_2",
"FIRE_CNTRL",
"FIRE_CNT_1",
"FIRE_CAUSE",
"TOTAL_RPT_",
"CMPLX_NM",
"IRWIN_ID",
"COMMENT",
"ADM_UNIT_C",
"ADMIN_ST",
"CREATE_DAT",
"CREATE_BY",
"MODIFY_DAT",
"MODIFY_BY",
"created_us",
"created_da",
"last_edite",
"last_edi_1",
"FeatClass",
"d_FeatClas",
"Category",
"d_Category",
"Own_Type",
"d_Own_Type",
"Own_Name",
"d_Own_Name",
"Loc_Own",
"Mang_Type",
"Mang_Name",
"Loc_Mang",
"Des_Tp",
"Loc_Ds",
"Unit_Nm",
"State_Nm",
"d_State_Nm",
"UNQE_FIRE_",
"Agg_Src",
"Src_Date",
"Source_PAI",
"WDPA_Cd",
"Pub_Access",
"d_Pub_Acce",
"Access_Src",
"Access_Dt",
"GAP_Sts",
"dGAP_Sts",
"GAPCdSrc",
"GAPCdDt",
"d_Des_Tp"
)
fire_manage <- fire_manage %>%
select(-one_of(fire_manage_cleanup))
fire_manage <- fire_manage %>%
rename(fire_name = incident_name,
discover_yr = fire_discovered_calendar_year,
discover_date = fire_control_date,
control_date = fire_control_date,
fire_cause = incident_general_cause_name,
mang_level = d_Mang_Typ,
mang_name = d_Mang_Nam,
land_name = Loc_Nm
)
fire_manage <- fire_manage %>%
filter(!is.na(mang_level)) %>%
filter(!is.na(mang_name))
library(tidyverse)
library(tidycensus)
library(sf)
library(tigris)
ca_sf <- counties(state = "CA", cb = TRUE)
fires_sf <- st_as_sf(fires_sf, wkt = "WKT")
ca_sf <- st_as_sf(ca_sf, wkt = "geometry")
st_crs(fires_sf) <- st_crs(ca_sf)
fires_sf <- st_make_valid(fires_sf)
fires_county <- st_intersection(fires_sf, ca_sf)
fires_county$NAME <- fires_county$NAME
#removing unnecessary columns
fires_county_cleanup <- c("POI_Jurisdictional_UI",
"POI_Protecting_UI",
"reporting_UI",
"fire_discovered_date_estimated_flag",
"fire_control_date_estimated_flag",
"collection_method",
"CREATE_DAT",
"CREATE_BY",
"MODIFY_DAT",
"MODIFY_BY",
"created_us",
"created_da",
"last_edite",
"last_edi_1",
"administrative_state_code",
"complex_name",
"fire_code",
"incident_num",
"irwin_identifier",
"admin_UC",
"uniquie_fireID",
"FIRE_DSCVR",
"FIRE_DSC_1",
"FIRE_DSC_2",
"FIRE_CNTRL",
"FIRE_CNT_1",
"FIRE_CAUSE",
"TOTAL_RPT_",
"CMPLX_NM",
"COUNTYFP",
"COUNTYNS",
"STATEFP",
"IRWIN_ID",
"ADM_UNIT_C",
"ADMIN_ST",
"UNQE_FIRE_",
"STUSPS",
"LSAD",
"STATE_NAME"
)
fires_county <- fires_county %>%
select(-one_of(fires_county_cleanup))
#renaming
fires_county <- fires_county %>%
rename(fire_name = name,
cause = cause_gen,
county_name = NAME,
county_name_full = NAMELSAD
)
library(countdown)
library(gt)
library(readxl)
library(gganimate)
library(gifski)
library(knitr)
library(kableExtra)
library(transformr)
fires_sf$discover_yr <- factor(fires_sf$discover_yr)
#Animated plot of fires_sf without any boundaries
fires_sf_byyear <- ggplot() +
geom_sf(data = fires_sf, aes(fill = factor(discover_yr))) +
labs(fill = "Year") +
theme_void()
fires_sf_byyear + transition_states(discover_yr, transition_length = 1, state_length = 1)
animate(fires_sf_byyear)
#animated plot of wildfires each year with fires_counties and adding county boundaries
combined_plot <- ggplot() +
geom_sf(data = ca_sf, aes(fill = NAME)) +
labs(fill = "County") +
theme_void()
combined_plot + transition_states(fires_sf$discover_yr, transition_length = 1, state_length = 1)
animate(
ggplot() +
geom_sf(data = fires_sf, aes(fill = factor(discover_yr))) +
labs(fill = "Year") +
theme_void(),
nframes = nrow(fires_sf),
fps = 1
)
fires_sf_byyear_animated <- fires_sf_byyear +
transition_states(discover_yr, transition_length = 1, state_length = 1)
county_plot <- ggplot() +
geom_sf(data = ca_sf, aes(fill = NAME), show.legend = FALSE) +
labs(fill = "County") +
theme_void()
fires_sf_byyear_animated + county_plot
fires_sf_byyear_with_boundaries <- ggplot() +
geom_sf(data = fires_sf, aes(fill = factor(discover_yr))) +
labs(fill = "Year") +
theme_void() +
transition_states(discover_yr, transition_length = 1, state_length = 1)
county_plot <- ggplot() +
geom_sf(data = ca_sf, aes(fill = NAME), show.legend = FALSE) +
labs(fill = "County") +
theme_void()
fires_animation_with_boundaries <- fires_sf_byyear_with_boundaries +
transition_states(discover_yr, transition_length = 1, state_length = 1)
animate(fires_animation_with_boundaries + county_plot)
View(fires_county)
fires_county_animate <- ggplot() +
geom_sf(data = fires_county, aes(fill = factor(discover_yr))) +
labs(fill = "Year") +
theme_void() +
transition_states(discover_yr, transition_length = 3, state_length = 1)
ggplot() +
geom_sf(data = fires_county, aes(fill = factor(discover_yr))) +
labs(fill = "Year") +
theme_void() +
transition_states(discover_yr, transition_length = 3, state_length = 1)
ggplot() +
geom_sf(data = fires_sf, aes(fill = factor(discover_yr))) +
geom_sf(data = ca_sf, show.legend = FALSE) +
theme_void() +
transition_states(discover_yr, transition_length = 3, state_length = 1)
ggplot() +
geom_sf(data = ca_sf, show.legend = FALSE) +
geom_sf(data = fires_sf, aes(fill = factor(discover_yr))) +
theme_void() +
transition_states(discover_yr, transition_length = 3, state_length = 1)
ggplot() +
geom_sf(data = ca_sf, show.legend = FALSE) +
geom_sf(data = fires_sf, aes(fill = factor(discover_yr))) +
theme_void() +
transition_states(discover_yr, transition_length = 3, state_length = 1)
fires_county_animate <- ggplot() +
geom_sf(data = ca_sf, show.legend = FALSE) +
geom_sf(data = fires_sf, aes(fill = factor(discover_yr))) +
theme_void() +
transition_states(discover_yr, transition_lengt
