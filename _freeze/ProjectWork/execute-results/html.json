{
  "hash": "79b735a6e6ef2517a6aa3400949a4e26",
  "result": {
    "engine": "knitr",
    "markdown": "\n#Workspace for Project 2\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(readr)\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: package 'ggplot2' was built under R version 4.2.3\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: package 'tidyr' was built under R version 4.2.3\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: package 'dplyr' was built under R version 4.2.3\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: package 'stringr' was built under R version 4.2.3\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ purrr     1.0.2\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.5.0     ✔ tibble    3.2.1\n✔ lubridate 1.9.3     ✔ tidyr     1.3.1\n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(tidycensus)\nlibrary(flextable)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n\nAttaching package: 'flextable'\n\nThe following object is masked from 'package:purrr':\n\n    compose\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(sf)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: package 'sf' was built under R version 4.2.3\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nLinking to GEOS 3.11.0, GDAL 3.5.3, PROJ 9.1.0; sf_use_s2() is TRUE\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(tigris)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nTo enable caching of data, set `options(tigris_use_cache = TRUE)`\nin your R script or .Rprofile.\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(tmap)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nBreaking News: tmap 3.x is retiring. Please test v4, e.g. with\nremotes::install_github('r-tmap/tmap')\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(RColorBrewer)\nlibrary(countdown)\nlibrary(gt)\nlibrary(readxl)\nlibrary(gganimate)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: package 'gganimate' was built under R version 4.2.3\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(gifski)\nlibrary(knitr)\nlibrary(kableExtra)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n\nAttaching package: 'kableExtra'\n\nThe following objects are masked from 'package:flextable':\n\n    as_image, footnote\n\nThe following object is masked from 'package:dplyr':\n\n    group_rows\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(transformr)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: package 'transformr' was built under R version 4.2.3\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\n\nAttaching package: 'transformr'\n\nThe following object is masked from 'package:sf':\n\n    st_normalize\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(ggtext)\n```\n:::\n\n\n#bringing over clean data \n- fires_sf (fire spatial data)\n- ca_sf (county spatial data)\n- fire_manage (merged fire and land management data)\n- fire_county (merged fire and county data)\n\n::: {.cell}\n\n```{.r .cell-code}\nfires_sf <- readRDS('Data/fires_sf.rds')\nfires_sf$discover_yr <- factor(fires_sf$discover_yr)\nca_sf <- readRDS('Data/ca_sf.rds')\nfires_manage <- readRDS('Data/fires_manage.rds')\nfires_county <- readRDS('Data/fires_county.rds')\nfires_county_grp <- readRDS('Data/fires_county_grp.rds')\ncounty_fire_stats <- readRDS('Data/county_fire_stats.rds')\n```\n:::\n\n\n\nInitial mapping of datasets independently:\n- these take forever to load omg\n\n::: {.cell}\n\n```{.r .cell-code}\n#map of management levels across california: federal, state, local, tribal etc\n#ggplot() +\n#  geom_sf(data = PAD_CA_sf, aes(fill = mang_level)) +\n#  labs(fill = \"Management Level\") +\n#  theme_void()\n\n#map of county boundaries in CA\nggplot() +\n  geom_sf(data = ca_sf, aes(fill = NAME), show.legend = FALSE) +\n  labs(fill = \"County\") +\n  theme_void() \n```\n\n::: {.cell-output-display}\n![](ProjectWork_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n\n```{.r .cell-code}\n#map of fires in CA: colored by year\nggplot() +\n  geom_sf(data = fires_sf, aes(fill = factor(discover_yr))) +\n  labs(fill = \"Year\") +\n  scale_fill_manual(values = rainbow(length(unique(fires_sf$discover_yr)))) +\n  theme_void()\n```\n\n::: {.cell-output-display}\n![](ProjectWork_files/figure-html/unnamed-chunk-3-2.png){width=672}\n:::\n:::\n\n\nJustifying Management -> County:\n\nConsidering percentage of total acres managed by each level\n\n::: {.cell}\n\n```{.r .cell-code}\n#absolutely can not push this dataset rip\nPAD_CA_sf <- readRDS('Data/PAD_CA_sf.rds')\ntotal_acres <- sum(PAD_CA_sf$GIS_Acres, na.rm = TRUE)\n\narea_summary <- PAD_CA %>%\n  group_by(mang_level) %>%\n  summarise(total_area = sum(GIS_Acres),\n            percentage = (sum(GIS_Acres) / total_acres) * 100) %>%\n  arrange(desc(total_area))  # Optional: Arrange by total_area in descending order\n\nprint(area_summary)\n\n#piechart visualization of management level\npie_landmang_perclands <- ggplot(area_summary, aes(x = \"\", y = percentage, fill = mang_level, label = paste0(round(percentage), \"%\"))) +\n  geom_bar(stat = \"identity\", width = 1) +\n  geom_text(position = position_stack(vjust = 0.5), aes(x = 1.55), color = \"black\", size = 3) +\n  coord_polar(\"y\", start = 0) +\n  labs(title = \"Public Lands Management:\",\n       subtitle = \"Percentage of Public Lands Each Jurisdiction Manages\",\n       fill = \"\") +\n  theme_void() +\n  theme(legend.position = \"bottom\") +\n  scale_fill_brewer(palette = \"Set2\")\n\nggsave(\"pie_landmang_perclands.png\", pie_landmang_perclands, width = 10, height = 10, units = \"in\")\n```\n:::\n\nResults:\nmang_level                    total_area percentage\n  <chr>                              <dbl>      <dbl>\n1 Federal                         84464295     91.4  \n2 State                            3304552      3.58 \n3 Local Government                 2128048      2.30 \n4 Non-Governmental Organization    1816762      1.97 \n5 American Indian Lands             673302      0.729\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfire_counts_manglvl <- fires_manage %>%\n  group_by(mang_level) %>%\n  summarize(fire_count = n()) %>%\n  mutate(percentage = (fire_count / sum(fire_count)) * 100)\n\npie_landmang_percfires <- ggplot(fire_counts_manglvl, aes(x = \"\", y = percentage, fill = mang_level, label = paste0(round(percentage), \"%\"))) +\n  geom_bar(stat = \"identity\", width = 1) +\n  geom_text(position = position_stack(vjust = 0.5), aes(x = 1.55), color = \"black\", size = 3) +\n  coord_polar(\"y\", start = 0) +\n  labs(title = \"Wildfires on Public Lands:\",\n       subtitle = \"Jurisdiction of public land fires from 1984-2020\",\n       fill = \"\") +\n  theme_void() +\n  theme(legend.position = \"bottom\") +\n  scale_fill_brewer(palette = \"Set2\")\n\n#74.3% of fires occurred on Federal Land, 510 fires\n#17.4% of fires occurred on State Land, 120 fires\n#nothing else of real importance\n#and this is from 1984 - 2020 ... \n\nggsave(\"pie_landmang_percfires.png\", pie_landmang_percfires, width = 10, height = 10, units = \"in\")\n```\n:::\n\n\nOver Time\n\n::: {.cell}\n\n```{.r .cell-code}\nfire_counts_manglvlyr <- fires_manage %>%\n  group_by(mang_level, discover_yr) %>%\n  summarize(fire_count = n(), total_acres = sum(total_reported_acres)) %>%\n  ungroup() %>%\n  group_by(discover_yr) %>%\n  mutate(total_fires = sum(fire_count),\n         total_acres_burnt = sum(total_acres),\n         numfires_perc = round((fire_count / total_fires) * 100),\n         acresfires_perc = round((total_acres / total_acres_burnt) * 100),\n         avg_size = total_acres / fire_count) %>%\n  ungroup()\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n`summarise()` has grouped output by 'mang_level'. You can override using the\n`.groups` argument.\n```\n\n\n:::\n\n```{.r .cell-code}\nggplot(fire_counts_manglvlyr, aes(x = discover_yr, y = fire_count, color = mang_level)) +\n  geom_line() +\n  labs(title = \"CA Wildfires Over Time Across Land Management Jurisdiction\",\n       x = \"Year Discovered\",\n       y = \"Number of Fires\",\n       color = \"Land Management\")\n```\n\n::: {.cell-output-display}\n![](ProjectWork_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n\n```{.r .cell-code}\nggplot(fire_counts_manglvlyr, aes(x = discover_yr, y = numfires_perc, color = mang_level)) +\n  geom_line() +\n  labs(title = \"Land Management Jurisdiction of CA Wildfires: Proportion of Fires\",\n       x = \"Year Discovered\",\n       y = \"Percentage of Total Fires\",\n       color = \"Land Management\")\n```\n\n::: {.cell-output-display}\n![](ProjectWork_files/figure-html/unnamed-chunk-6-2.png){width=672}\n:::\n\n```{.r .cell-code}\nggplot(fire_counts_manglvlyr, aes(x = discover_yr, y = total_acres_burnt, color = mang_level)) +\n  geom_line() +\n  labs(title = \"Land Management Jurisdiction of CA Wildfires: Acres Burnt\",\n       x = \"Year Discovered\",\n       y = \"Total Acres Burnt\",\n       color = \"Land Management\")\n```\n\n::: {.cell-output-display}\n![](ProjectWork_files/figure-html/unnamed-chunk-6-3.png){width=672}\n:::\n\n```{.r .cell-code}\nggplot(fire_counts_manglvlyr, aes(x = discover_yr, y = avg_size, color = mang_level)) +\n  geom_line() +\n  labs(title = \"Land Management Jurisdiction of CA Wildfires: Fire Size\",\n       x = \"Year Discovered\",\n       y = \"Average Size of Fires\",\n       color = \"Land Management\")\n```\n\n::: {.cell-output-display}\n![](ProjectWork_files/figure-html/unnamed-chunk-6-4.png){width=672}\n:::\n:::\n\n\nAnimated Plot of Wildfires each year:\n- without boundaries\n\n::: {.cell}\n\n```{.r .cell-code}\n#Animated plot of fires_sf without any boundaries\nggplot() +\n  geom_sf(data = fires_sf, aes(fill = factor(discover_yr))) +\n  labs(fill = \"Year\") +\n  theme_void() + \n  transition_states(discover_yr, \n                    transition_length = 1, \n                    state_length = 1)\n```\n\n::: {.cell-output-display}\n![](ProjectWork_files/figure-html/unnamed-chunk-7-1.gif)\n:::\n:::\n\n\n- with county boundaries\n\n::: {.cell}\n\n```{.r .cell-code}\n#animated plot of wildfires each year with county boundaries\n\nanim_firescounties <- ggplot() +\n  geom_sf(data = ca_sf, aes(), fill = NA, color = \"black\", size = 1.2) +\n  geom_sf(data = fires_county_grp, aes(fill = county_name), show.legend = FALSE) +\n  labs(title = \"Wildfire Perimeters\",\n       subtitle = 'Year: {closest_state}') +\n  theme_void() +\n  transition_states(discover_yr, \n                  transition_length = 10, \n                  state_length = 10)\n\nanim_save(\"anim_firescounties.gif\", anim_firescounties, renderer = gifski_renderer(), path = \"PrerenderedPlots/\")\n\n#animated plot of counties with wildfires\nanim_firescounties_grp <- ggplot() +\n  geom_sf(data = ca_sf, aes(), fill = NA, color = \"black\", size = 1.2) +\n  geom_sf(data = county_fire_stats, aes(fill = county_name), show.legend = FALSE) +\n  labs(title = \"Counties Experiencing Wildfires\",\n       subtitle = 'Year: {closest_state}') +\n  theme_void() +\n  transition_states(discover_yr, \n                  transition_length = 10, \n                  state_length = 10)\n\nanim_save(\"anim_firescounties_grp.gif\", anim_firescounties_grp, renderer = gifski_renderer(), path = \"PrerenderedPlots/\")\n```\n:::\n\n\nComparing Frequency and Intensity of Fires over time by County (ALL COUNTIES)\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(fires_county_grp, aes(x = discover_yr, y = fire_count, color = county_name)) +\n  geom_line() +\n  labs(title = \"CA Wildfires across Counties: Number of Fires\",\n       x = \"Year Discovered\",\n       y = \"Number of Fires\",\n       color = \"County\") +\n  theme(legend.position = \"none\", legend.title = element_blank())\n```\n\n::: {.cell-output-display}\n![](ProjectWork_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n\n```{.r .cell-code}\nggplot(fires_county_grp, aes(x = discover_yr, y = numfires_perc, color = county_name)) +\n  geom_line() +\n  labs(title = \"CA Wildfires across Counties: Percentage of Fires\",\n       x = \"Year Discovered\",\n       y = \"Percentage of Total Fires\",\n       color = \"County\")\n```\n\n::: {.cell-output-display}\n![](ProjectWork_files/figure-html/unnamed-chunk-9-2.png){width=672}\n:::\n\n```{.r .cell-code}\nggplot(fires_county_grp, aes(x = discover_yr, y = total_acres, color = county_name)) +\n  geom_line() +\n  labs(title = \"CA Wildfires across Counties: Total Acres Burnt\",\n       x = \"Year Discovered\",\n       y = \"Acres Burnt\",\n       color = \"County\")\n```\n\n::: {.cell-output-display}\n![](ProjectWork_files/figure-html/unnamed-chunk-9-3.png){width=672}\n:::\n\n```{.r .cell-code}\nggplot(fires_county_grp, aes(x = discover_yr, y = acresfires_perc, color = county_name)) +\n  geom_line() +\n  labs(title = \"CA Wildfires across Counties: Percentage of Total Fire Damage\",\n       x = \"Year Discovered\",\n       y = \"Percentage of Total Acres Burnt\",\n       color = \"County\")\n```\n\n::: {.cell-output-display}\n![](ProjectWork_files/figure-html/unnamed-chunk-9-4.png){width=672}\n:::\n\n```{.r .cell-code}\nggplot(fires_county_grp, aes(x = discover_yr, y = avg_size, color = county_name)) +\n  geom_line() +\n  labs(title = \"CA Wildfires across Counties: Average Size of Fires\",\n       x = \"Year Discovered\",\n       y = \"Average Size of Fires\",\n       color = \"County\")\n```\n\n::: {.cell-output-display}\n![](ProjectWork_files/figure-html/unnamed-chunk-9-5.png){width=672}\n:::\n:::\n\n\n\nMapping ^^ \n\n\n::: {.cell}\n\n```{.r .cell-code}\nanim_totfires_county <- ggplot() +\n  geom_sf(data = ca_sf, aes(), fill = NA, color = \"black\", size = 1.2) +\n  geom_sf(data = county_fire_stats, aes(fill = fire_count), show.legend = \"fill\") +\n  labs(title = \"Wildfire Frequency\",\n       subtitle = 'Year: {closest_state}',\n       fill = \"Number of Wildfires\") +\n  theme_void() +\n  scale_fill_gradient(low = \"#ffdc6b\", high = \"#ad2723\") +\n  transition_states(discover_yr, \n                    transition_length = 10, \n                    state_length = 10)\n\nanim_save(\"anim_totfires_county.gif\", anim_totfires_county, renderer = gifski_renderer())\n\n\nanim_percfires_county <- ggplot() +\n  geom_sf(data = ca_sf, aes(), fill = NA, color = \"black\", size = 1.2) +\n  geom_sf(data = county_fire_stats, aes(fill = numfires_perc), show.legend = \"fill\") +\n  labs(title = \"Wildfire Frequency\",\n       subtitle = 'Year: {closest_state}',\n       fill = \"Percentage of Yearly Wildfires\") +\n  theme_void() +\n  scale_fill_gradient(low = \"#ffdc6b\", high = \"#ad2723\") +\n  transition_states(discover_yr, \n                    transition_length = 10, \n                    state_length = 10)\n\nanim_save(\"anim_percfires_county.gif\", anim_percfires_county, renderer = gifski_renderer())\n\n\nanim_totacres_county <- ggplot() +\n  geom_sf(data = ca_sf, aes(), fill = NA, color = \"black\", size = 1.2) +\n  geom_sf(data = county_fire_stats, aes(fill = total_acres), show.legend = \"fill\") +\n  labs(title = \"Total Acres Burnt\",\n       subtitle = 'Year: {closest_state}',\n       fill = \"Acres Burnt\") +\n  theme_void() +\n  scale_fill_gradient(low = \"#ffdc6b\", high = \"#ad2723\") +\n  transition_states(discover_yr, \n                    transition_length = 10, \n                    state_length = 10)\n\nanim_save(\"anim_totacres_county.gif\", anim_totacres_county, renderer = gifski_renderer())\n\nanim_avgsize_county <- ggplot() +\n  geom_sf(data = ca_sf, aes(), fill = NA, color = \"black\", size = 1.2) +\n  geom_sf(data = county_fire_stats, aes(fill = avg_size), show.legend = \"fill\") +\n  labs(title = \"Fire Intensity by County\",\n       subtitle = 'Year: {closest_state}',\n       fill = \"Acres Burnt/Number of Fires\") +\n  theme_void() +\n  scale_fill_gradient(low = \"#ffdc6b\", high = \"#ad2723\") +\n  transition_states(discover_yr, \n                    transition_length = 10, \n                    state_length = 10)\n\nanim_save(\"anim_avgsize_county.gif\", anim_avgsize_county, renderer = gifski_renderer())\n```\n:::\n",
    "supporting": [
      "ProjectWork_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}